// 后端相关模块代码集合

$(function(){
    // 文本编辑器
    var testEditor=$("#test-editormd").length &&editormd("test-editormd", {
        path : '/bower_components/editor.md/lib/',
        theme : "dark",
        saveHTMLToTextarea:true,
        width: "100%",
        height: 540
    });

    $("#adt-btn").on("click",function(){
        //brief 用于文章列表显示的内容，单独为一段内容 ，从content分离出来
        var fg='<hr style="page-break-after:always;" class="page-break editormd-page-break">',c=testEditor.getPreviewedHTML(),f=c.indexOf(fg),b=c.split(fg);
        var params={
            name:$("[name='name']",".arform").val(),
            user:$("[name='user']",".arform").val(),
            category:$("[name='category']",".arform").val(),
            brief:f>0?b[0]:"简介都没留下，文章到这份上真是够了<strong>文章编辑没有添加分页符，简介部分需要有分隔符分割才会显示.</strong>",
            content:f>0?b.concat():c
        }
        $.post("/admin/article/add",params,function(data){
            console.log(data);
        });

//            console.log(testEditor.getHTML()); 这个是获取textarea 保存的HTML 代码 需要设置saveHTMToTextarea:true.
//        console.log(testEditor.getPreviewedHTML());


    });
});